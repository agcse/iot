\documentclass{article}
\usepackage{fancyhdr}
\usepackage{datetime}
\usepackage{parskip}
\usepackage{graphicx}

\newdateformat{monthyeardate}{\monthname[\THEMONTH], \THEYEAR}

\pagestyle{fancy}

\fancyhf{}
\fancyfoot[L]{University of Oulu. \monthyeardate\today}

\lhead{IoT Data Analytics}
\rhead{Page \thepage}

\title{
Exercise 2: IoT Data Analytics
\bigskip
\author{Andrei Golubev 2621924 \\ Hassan Shaheen 2600602}
\date{\parbox{\linewidth}{\centering
  \endgraf\bigskip
  University of Oulu, Oulu, Finland
  \endgraf\monthyeardate\today}}
}

\setlength{\parindent}{0pt}

\begin{document}
\maketitle
\thispagestyle{empty}
\newpage

\section{Visualization}

Visualization implementation can be divided into two separate tasks: data preparation and actual
implementation. The first one is required when the data is not ready for the use (e.g. collected
from different sources or in a wrong format), which is usually the case in real world data
visualization. The second relies on the use case and research topic and should ideally simplify data
analysis. In the following subsections we describe briefly the visualization approach details.

\subsection{Data preparation}

There are two primary data files that need to be considered: sensor measurements (temperature, pir,
co2, etc.) and sensor GPS coordinates.

We perform the following preprocessing on the \textbf{Sensor GPS coordinates} file:

* Move out all unnecessary information (e.g. Tellus area GPS coordinates).

* Convert XLSX format file into plain CSV.

* Unify device id format between this file and sensor measurements file.

* Convert GPS coordinates into relative to Tellus area coordinates (this is a necessary step for
futher visualization and explained below).

\textbf{Sensor measurements} file is also preprocessed:

* Only required information is left: device ids (required for later localization), timestamps, pir
readings.

* The whole data file is split into \textit{monthly} data (a single CSV contains 1 month of sensor
measurements). In our use case, monthly separation is sufficient and the benefits of such a split
are not to be ignored as we gain reduced the memory footprint during visualization and as well as
significant speed up during parsing.

With the described actions in mind, we are able to successfully implement visualization that gives
us a good base for future analysis.

\subsection{Visualization implementation}

We visualize the sensor measurements (PIR data) by drawing it on a 2D image. This is done via a
mapping from GPS coordinates of sensors that are converted into relative to Tellus area and then
converted into image coordinates relative to used Tellus map found at [1]. Figures 1 and 2 show the
map and the corresponding area annotation.

We draw sensor layer on top of the image-based map, with sensors by default being represented by
pixel dots (see Figure 3.).

To visualize PIR measurements we use simple transparent circles where the radius of the circle is
proportional to the PIR number. To represent measurements over time, we bundle individual 2D Tellus
map images (with sensor data layer) into a GIF. We use \textit{1 hour} time precision so any two
consecutive maps (images) in the GIF differ by one hour and thus the PIR data for the whole hour is
aggregated into a single image. Figure 4 shows snapshots from the GIF for some random time period.

\begin{figure}[ht!]
  \centering
  \includegraphics[width=90mm]{./tellus_map.png}
  \caption{Tellus map. Modified [1]}
\end{figure}

\begin{figure}[ht!]
  \centering
  \includegraphics[width=90mm]{./tellus_map_annotation.png}
  \caption{Tellus map annotation [1]}
\end{figure}

\begin{figure}[ht!]
  \centering
  \includegraphics[width=90mm]{./tellus_map_sensor_locations.png}
  \caption{Tellus map with sensor locations}
\end{figure}

\begin{figure}[ht!]
  \centering
  \begin{minipage}{.5\textwidth}
    \centering
    \includegraphics[width=.95\linewidth]{./tellus_map_sensor_data_1.png}
  \end{minipage}%
  \begin{minipage}{.5\textwidth}
    \centering
    \includegraphics[width=.95\linewidth]{./tellus_map_sensor_data_2.png}
  \end{minipage}
  \caption{Tellus map snapshots with sensor measurements layer added}
\end{figure}

\section{Seasonal variations}
To investigate the seasonal variations, we are analysing the difference of movement data among random weeks, exam weeks, and holiday weeks.


In our analysis, we found out that there is a clear pattern in movement data during a single day. 
During weekdays movement start around 8 am and from 10 am to 4 pm Tellus is at its full capacity. 
After 4 pm it starts decreasing and after 8 pm there is very little movement, the pattern is the same until Friday. But the weekends are different, on Saturdayâ€™s movement starts after 10 pm and it visible up to 7 pm however the average movement is quite low as compared to weekdays. As the university is closed on Sundays there is very little movement. There are exceptions on Sundays we found out that on some specific Sundays due to some event or meeting in Tellus stage (Area 3) or meeting rooms the numbers can vary but the overall pattern is the same. From the visualization, we can see that area 1 (Main common area) and area 13 (Group work area) are mostly occupied. 

 
By comparing random weeks with exam weeks, we identified that there is no clear difference in the pattern on  weekdays and weekends they are almost identical in both weeks.


\section{Future implications}

\section{References}

1. Tellus general description and map. URL: https://www.oulu.fi/tellusarena/description-map

\end{document}
